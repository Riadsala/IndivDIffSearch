% ARH/AL March 2014. Code to process data from Anna's project looking at the effect of% gaze-contingent filtering on search strategies.% Data recorded from EyeLink 1000.% open the .asc file, get fixation and trial data, output trial resultsclear all;numSub = 16;fileRun = 0;%subNo = input('Enter the subject number: ');filetomake = input('name the RT and accuracy file: ', 's');F2ID = fopen(filetomake, 'a');fprintf(F2ID, 'subNum\t trialNo\t trialType\t hemianopia\t easySide\t targPresent\t targSide\t RT\t accuracy\t exclusions\n');for subNo=1:numSub        condition = 'Ul';            filetoread = strcat(condition, num2str(subNo),'.asc'); % name of search data file to read    if (fopen(filetoread, 'r')~=-1)        FID=fopen(filetoread, 'r');        trialRunning = 0;        endtrialRun = 0;        trialCount = 0;        sacOnTime = 0;        fileRun = 1;    end                while fileRun            line=fgetl(FID); %get the next line of data                        if line == -1  % if the end of the file has been reached                fclose(FID);                                fileRun = 0; %leave the main loop                break;                %     elseif findstr(line, 'TRIALNO_80')                %         fclose(F2ID);                %         fclose(FID);                %         fileRun = 0; %leave the main loop                %         break;            end                        if findstr(line, 'START')                trialCount = trialCount+1;                targPres='x';                targSide='x';                TargX1='-1';                trialRunning =1; %start loop to get timing / saccade info from trial                                %         maxXvalue=0;                while trialRunning                    line = fgetl(FID);                    if strfind(line, 'RESPONSE_') %                        index = strfind(line, 'SE_')+3;                        response =line(index:length(line));                    end                    if strfind(line, 'TargPres_') %                        index = strfind(line, 'TargPres')+9;                        targPres =str2num(line(index:length(line)));                    end                    if strfind(line, 'TargSide_') %                        index = strfind(line, 'TargSide_')+9;                        targSide = line(index:length(line));                    end                    if strfind(line, 'RT_') %                        index = strfind(line, 'RT_')+3;                        RT = str2num(line(index:length(line)));                                            end                    if findstr(line, 'Message_')                        index= strfind(line,'ge_')+3;                        message=str2num(line(index:length(line)));                    end                                           easySide='x';                    if findstr(line, '-1.7.jpg')                        index= strfind(line,'-1.7.jpg')-1;                        index2=strfind(line,'-1.7.jpg')                        easySide=line(index:index2)                    end                       if easySide=='x'                            if findstr(line, 'v6')                            index=strfind(line,'v6')                            var=line(index+1)                            elseif findstr(line, 'v1.7')                            end                        end                                        if strfind(line, 'Hemianopia') %                        index = strfind(line, 'Hemianopia')+11;                        hemianopia = line(index:length(line));                        if ((targPres == 0 && response == 'l') || (targPres == 1 && response == 'r'))|| (message ~= 'GoodTrial')                            accuracy = 0;                        else                            accuracy = 1;                        end                        fprintf(F2ID, '%d\t %d\t %s\t %s\t %s\t %d\t %s\t %2.3f\t %s\t %d\n', subNo, trialCount, condition, hemianopia,easySide, targPres, targSide, RT, message, accuracy);                        trialRunning = 0;                        break;                    end                end            end        end   endfclose(F2ID);